<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-学习笔记/计算机网络/运输层-可靠数据传输">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.22">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Jetzihan RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jetzihan Atom Feed"><title data-rh="true">运输层-可靠数据传输(rdt) | Jetzihan</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jetzihan.netlify.app/docs/学习笔记/计算机网络/运输层-可靠数据传输"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="msvalidate.01" content="7BFDC4075777E569E05945A5D040DA05"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="运输层-可靠数据传输(rdt) | Jetzihan"><meta data-rh="true" name="description" content="rdt协议简介"><meta data-rh="true" property="og:description" content="rdt协议简介"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jetzihan.netlify.app/docs/学习笔记/计算机网络/运输层-可靠数据传输"><link data-rh="true" rel="alternate" href="https://jetzihan.netlify.app/docs/学习笔记/计算机网络/运输层-可靠数据传输" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://jetzihan.netlify.app/docs/学习笔记/计算机网络/运输层-可靠数据传输" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.a3ad25a6.css">
<link rel="preload" href="/assets/js/runtime~main.10231cf0.js" as="script">
<link rel="preload" href="/assets/js/main.3a3576d8.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Jetzihan" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Jetzihan" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Jetzihan</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Notes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/front/">FrontEnd</a></li><li><a class="dropdown__link" href="/docs/study/">Study</a></li><li><a class="dropdown__link" href="/docs/back/">BackEnd</a></li></ul></div><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/website">Links</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="搜索" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a href="https://github.com/inannan423" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Github repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">🎉Hello🎈</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/front">前端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/back">后端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/study">学习笔记</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/study">学习笔记引入</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/学习笔记/数字媒体技术基础/第一章-简介">数字媒体技术基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/学习笔记/计算机网络/TCP-IP分层图">计算机网络</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/TCP-IP分层图">TCP/IP分层图</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/中英文概念">中英文概念</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/网络分类和分层架构">网络分类和分层架构</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/基础知识">基础知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/应用层">应用层</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/应用层-DNS">应用层-DNS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/运输层">运输层</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/学习笔记/计算机网络/运输层-可靠数据传输">运输层-可靠数据传输(rdt)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/运输层-TCP连接建立过程（三次握手四次挥手）">运输层-TCP连接建立过程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/网络层">网络层</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/数据链路层-以太网">数据链路层-以太网</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/物理层">物理层</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/学习笔记/计算机网络/题目">习题</a></li></ul></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">学习笔记</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">计算机网络</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">运输层-可靠数据传输(rdt)</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>运输层-可靠数据传输(rdt)</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rdt协议简介">rdt协议简介<a class="hash-link" href="#rdt协议简介" title="标题的直接链接">​</a></h2><p><em>可靠数据传输</em>（Reliable Data Transfer，RDT）是一种<strong>可靠的数据传输协议</strong>，它在传输层、应用层和数据链路层都很重要。
特点：<em>不出错、不重复、不失序、不丢失</em>，是计算机网络Top10的问题之一。<br>
<!-- -->TCP实现了可靠数据传输。<br>
<em>rdt的使命</em>：<strong>在下层依赖提供的服务不可靠的情况下，为上层提供可靠的服务</strong>。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32zec0l8zj30ri0fy12t.jpg" alt="1654831286933.png" class="img_ev3q"><br>
<em>其中涉及了一个封装和解封装的过程。</em> 上半部分是应用层，下面是rdt提供的可靠的信道（尽管下层是不可靠的）。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>⚠  图解</div><div class="admonitionContent_S0QG"><p>在上图中，rdt_send和deliver_data()都是单向的通道，但是udt_send和rdt_rec是双向的通道。<em>我们只考虑单向的信息传输（发送方发给接收方），其实两个相反的单向就是双向的</em>。</p></div></div><blockquote><p>我们常用有限状态机（Finite State Machine，FSM）来描述rdt协议。箭头上的文字，横线上方是引起状态变迁的事件，下方是活动。  </p></blockquote><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 rdt协议的研究方式</div><div class="admonitionContent_S0QG"><p>使用<em>渐进式的方式</em>进行研究，因此从rdt1.0开始，从完全可信到逐渐不可信（接近真实情况）进行研究。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rdt10">rdt1.0<a class="hash-link" href="#rdt10" title="标题的直接链接">​</a></h2><blockquote><p>可靠信道上的可靠数据传输</p></blockquote><p><em>1.0假定底层信道完全可靠，不会丢弃分组</em>。但是不可能存在这种信道。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h32zpv2razj30qh07awjo.jpg" alt="1654831951761.png" class="img_ev3q">  </p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>🌳  rdt1.0图解</div><div class="admonitionContent_S0QG"><p>在rdt1。0中，由于我们认为下层信道完全可信，因此我们的rdt信道只需要进行封装和解封装操作，如左边的图，当调用时，<em>创建一个rdt_send状态</em>，这个状态包含下面的活动：<strong>将数据封装打包，然后通过udt发送出去（实际上，这个时候的udt我们认为是可信的）</strong>，接着就等待下次的调用。在右边的接收端，由于我们认为数据完全不会丢失，所以我们<em>只创建一个rcv状态</em>，进行数据包的解封装，然后把数据传给应用层，再等待下次数据送达。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rdt20">rdt2.0<a class="hash-link" href="#rdt20" title="标题的直接链接">​</a></h2><blockquote><p>产生<em>位错误</em>的信道上的可靠数据传输</p></blockquote><p><em>此时的下层信道就不再可信了</em>，<strong>但是它只可能产生位错误，即0变1、1变0，它不可能产生乱序和丢包</strong>。</p><p><strong>如何从错误中恢复？</strong>  </p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 ARQ协议（Automatic Repeat Request，ARQ）</div><div class="admonitionContent_S0QG"><p><em>确认机制</em>（Acknowledgement，ACK），接收方<em>显式</em>地告知发送方分组已经接收。<br>
<em>NAK</em>：接收方<em>显式</em>地告知发送方分组有错误。<br>
<!-- -->发送方收到NAK后<em>重传</em>分组。  </p><blockquote><p>Pardon！（没听清！请再说一遍）就是现实生活中的一种重传机制。</p></blockquote></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>⚠ 2.0的新机制</div><div class="admonitionContent_S0QG"><p>差错检验（校验和）、序列号、控制消息的反馈（ACK）、重传</p></div></div><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h330a4blu3j30q40ibgy0.jpg" alt="1654833119521.png" class="img_ev3q">  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h330erjrjgj30px0iqgwj.jpg" alt="1654833379580.png" class="img_ev3q">  </p><p>::: theorem 2.0的缺陷
2.0致命的缺陷是并没有考虑到<em>如果ACK和NAK出错了怎么办</em>，这样的话，就会导致整个传输过程的错误，进入<em>死锁</em>。<br>
<!-- -->方法：可以给ACK和NAK增加校验和，检错并纠错（难度高），添加额外的控制消息（但是控制消息也可能会坏），一旦ACK和NAK错了就重传（比较简单，但是如果本身被正确接收那么再重传会接收重复分组）。这个问题将在下面得到解决.
:::</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rdt21">rdt2.1<a class="hash-link" href="#rdt21" title="标题的直接链接">​</a></h2><blockquote><p>给每个分组增加序列号(SYN)，解决上面的2.0缺陷</p></blockquote><p>在rdt下，状态数量翻倍。<br>
<!-- -->接收方需要记住当前状态。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h330tl8wbaj30qi0in4ah.jpg" alt="1654834239596.png" class="img_ev3q"><br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h330w8iqq1j30r70j5ank.jpg" alt="1654834395729.png" class="img_ev3q">  </p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 实例</div><div class="admonitionContent_S0QG"><p>在rdt2.0的基础之上，<em>发送方在打包数据包时添加了0或者1编号</em>，<em>同样ACK,NAK字段上也添加了0，1字段</em>，表示0.1号字段的确认或者否定。<strong>发送方就有了2种状态发送0号数据包，1号数据包，接收方也有了2种状态等待0号数据包和等待1号数据包</strong>。现在假设情景发送方向接收方发送0号数据包，如果接收方接收到0号数据包，返回ACK，但是ACK出现翻转，接收方处于等待1号数据状态，发送方重复发送0号数据，接收方会拒绝0号数据，避免重复。如果接收方接收到0号数据包出现错误，返回NAK，但是NAK出现翻转，接收方处于等待0号数据状态，发送方继续发送1号数据，接收方会拒绝1号数据，避免错序。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rdt22">rdt2.2<a class="hash-link" href="#rdt22" title="标题的直接链接">​</a></h2><blockquote><p>取消NAK消息，只使用ACK消息进行确认。在ACK消息中显式加入被确认的分组的序列号。发送方在收到重复ACK之后，采取与NAK消息一样的操作，重传当前分组。  </p></blockquote><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3357l0n8ij30rt0kyann.jpg" alt="1654843354889.png" class="img_ev3q">  </p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 实例</div><div class="admonitionContent_S0QG"><p>我们在ACK的信息上加上了期望的顺序号，<strong>现在假设情景发送方向接收方发送0号数据包</strong>，<em>如果接收方接收到0号数据包，返回（ACK，1）</em>，<strong>发送方接着发送1号数据包</strong>。<strong>如果接收方接收到0号数据包出现错误，返回（ACK，0），发送方重传0号数据包</strong>。<br>
<!-- -->也就是说，如果我发送为0，你接收正确，那么你必须发送1，之后我开始发下一个数据包（1），如果你发送0给我，那么我就要把0号数据包重传给你。</p></div></div><hr><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>⚠ rdt2.x的缺陷</div><div class="admonitionContent_S0QG"><p>rdt2.x<em>实际上只考虑了错位的发生</em>，却<em>没有考虑丢包</em>。这个问题留给rdt3.0去解决。</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rdt30">rdt3.0<a class="hash-link" href="#rdt30" title="标题的直接链接">​</a></h2><blockquote><p>如果A发送了一个分组，但是中途丢失，那么B就不会有任何反应，A也会一直等下去，那么就会崩溃。<br>
<!-- -->解决方法：<em>等待合理的时间之后没有收到ACK就重传</em>。但是出现了这样的问题：在合理时间之后才到达，那么会发生重复，不过可以使用序列号解决。  </p></blockquote><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h335kf357vj30pf0g7aj4.jpg" alt="1654844092106.png" class="img_ev3q">  </p><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"> 丢包实例★ ![1654844180475.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h335lwrwwdj30re0fgn33.jpg) ![1654844603717.png](https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h335t8vku1j30qt0fm114.jpg)</div></div></details><p><em>rdt3.0能正常工作但是性能很差</em>  </p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 实例</div><div class="admonitionContent_S0QG"><p>1Gbps的链路，15ms的端到端传播延迟，1KB的分组。</p></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"> 计算 T（传播延迟）=L(包大小`bit)/R(速率`bit/s)=(8kb/pkt)/(10^9 b/sec)=8ms 则发送方利用率： U=(L/R)/(RTT+L/R)=0.008/30.009=0.00027，RTT是延迟时间 也就是说1Gbps的链路上每30ms才能发送一个分组=33KB/s 性能很差，*本质原因在于“停等”操作*。</div></div></details><h2 class="anchor anchorWithStickyNavbar_LWe7" id="流水线和滑动窗口机制">流水线和滑动窗口机制<a class="hash-link" href="#流水线和滑动窗口机制" title="标题的直接链接">​</a></h2><blockquote><p>为了解决rdt3.0的缺陷，我们需要一个滑动窗口机制。利用流水线机制，我们连续发多个分组（例如三个），然后再进入等待状态。这样上面的利用率U=0.00027乘以3就会变成0.0008.在这种情况下，<em>我们需要更大的序列号范围</em>。发<em>送方和接收方需要更大的存储空间来缓存分组</em>。</p></blockquote><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"> 平等协议和流水线协议的对比<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3454h4o55j30lb08swhj.jpg" class="img_ev3q"></div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="滑动窗口协议sliding-window-protocol">滑动窗口协议（Sliding-Window Protocol）<a class="hash-link" href="#滑动窗口协议sliding-window-protocol" title="标题的直接链接">​</a></h3><p><strong>窗口</strong>：允许使用的序列号范围。<br>
<strong>窗口尺寸N</strong>：最多有N个待确认的分组。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3457ydgcbj30dp039jsq.jpg" alt="1654918110027.png" class="img_ev3q"><br>
<!-- -->在图中，窗口尺寸为14，即最多有14个待确认的分组。窗口不断往右边挪动进行确认。  </p><p><a href="https://blog.csdn.net/qq_53144843/article/details/120907815?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-5-120907815-blog-78242170.pc_relevant_blogantidownloadv1&amp;spm=1001.2101.3001.4242.4&amp;utm_relevant_index=7" target="_blank" rel="noopener noreferrer">滑动窗口协议GBN和SR</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gbn协议回退重传协议go-back-n-protocol">GBN协议（回退重传协议，Go-Back-N Protocol）<a class="hash-link" href="#gbn协议回退重传协议go-back-n-protocol" title="标题的直接链接">​</a></h3><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>🌳GBN协议内容</div><div class="admonitionContent_S0QG"><p>1.分组头部包含k-bit序列号。<br>
<!-- -->2.窗口尺寸为N，即最多允许N个待确认的分组。  </p><blockquote><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h345g49enkj30yb06mq5g.jpg" alt="image.png" class="img_ev3q"><br>
<!-- -->send-base:最小的序列号<br>
<!-- -->nextsequence:下一个待确认的分组序列号</p></blockquote><p>3.<em>累计确认</em>ACK（n），<strong>确认到序列号n（包含n）的分组均被正确接收</strong>。可以收到重复ACK。（接收者仅仅发送累计的确认，如果中间有数据损失则不予确认。<br>
<!-- -->4.为传输分组设置计时器（timer），若超时Timeout事件：如果n这个序列号发生了超时事件<em>那么就要重传序列号大于等于n且还未收到ACK的所有分组(n+1、n+2、n+3····)</em>,可能会造成资源浪费。</p></div></div><p><strong>发送方扩展FSM</strong>：<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3460qbqynj30su0kvqis.jpg" alt="f435557fdff300a3a403dbf824464de.png" class="img_ev3q">  </p><p><strong>接收方扩展FSM</strong>：<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h3464kbytlj30uw088q9f.jpg" alt="1654919984120.png" class="img_ev3q">  </p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>⚠ 接收方的机制</div><div class="admonitionContent_S0QG"><p>接收方发送拥有最高序列号的、已经被正确接收的分组ACK。GBN的<em>接收方不存在缓存</em>，它只需要记住唯一的expectedSequnce。可能产生重复的ACK。<em>对于乱序的分组，全部丢弃并重新确认序列号最大的、按序到达的分组</em>。<strong>如果我期望的分组的序列号是5，但是此时收到了7，则确认序列号4，将5、7丢弃</strong>。</p></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"> 举例：窗口大小为4时<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h346c7rk1aj30p50mb7ej.jpg" class="img_ev3q"></div></div></details><p>窗口大小为4，发送方发送数据包0，1，2，3，然后进入等待状态，其中<em>数据包2丢失</em>，接收方返回Ack0，1，窗口滑动继续发送包4，5，此时包2计时超时，默认数据包2没有收到，按照GBN，发送方重新发送数据包2，3，4，5。这里可以看出数据包重复了。  </p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 练习题</div><div class="admonitionContent_S0QG"><p>数据链路层采用后退N帧（GBN）协议，发送方已经发送了编号为0～7的帧。<em>当计时器超时时</em>，若<em>发送方</em>只收到0、2、3号帧的确认，则发送方需要重发的帧数是多少？分别是那几个帧？</p></div></div><details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Details</summary><div><div class="collapsibleContent_i85q"> 答案 由于采用累计确认，只管收到的最大的ACK，因为收到了ACK3，那么说明帧2也正常发送到了（虽然ACK2丢失了），也就是说，发送方认为正确传送了0、1、2、3帧，所以超时之后，就重传3之后的所有帧，为4、5、6、7帧。</div></div></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sr协议选择重传协议selective-repeat">SR协议(选择重传协议，Selective Repeat)<a class="hash-link" href="#sr协议选择重传协议selective-repeat" title="标题的直接链接">​</a></h3><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>🔔 GBN的缺陷</div><div class="admonitionContent_S0QG"><p>GBN使用累<em>计确认机制，重传时导致很多重传</em>，造成资源浪费，因此<strong>SR协议使用单独确认机制，设置了缓存机制，缓存乱序到达的分组</strong>，为每一个分组设置单独的计时器。此时，发送方和接收方均使用滑动窗口了。</p></div></div><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h35a4yzx8ij310b0k5ain.jpg" alt="1655003041611.png" class="img_ev3q">  </p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>🌳 发送方</div><div class="admonitionContent_S0QG"><p><em>从上层接收的数据</em>：<br>
<!-- -->如果窗口有空位，发送数据包。<br>
<em>如果第n帧超时</em>：<br>
<!-- -->重发n数据包，重启n的定时器。<br>
<em>如果收到n的ACK</em>：<br>
<!-- -->标记n帧为已完成。如果n为最小的没被接收的帧，那么在接收到ACKn后，窗口向前滑动。  </p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>🌳 接收方</div><div class="admonitionContent_S0QG"><p><em>收到分组n</em>：<br>
<!-- -->如果在（recevbase，recevbase+N-1）内，那么表示n是期望收到的，发送确认ACK，如果收到的是乱序的分组，那么缓存下来（buffer），如果是正常按序到达的，那么交付给上层并滑动窗口。<br>
<em>如果收到的分组在(recevbase-N,recevbase-1)范围内</em>：<br>
<!-- -->这说明之前正确接收分组时发送的ACK丢失了，没有正确到达发送端，因此要再次确认ACK（n）。<br>
<em>其他时候</em>：<br>
<!-- -->忽略。</p></div></div><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h35aqt126qj30vw0ljgvy.jpg" alt="1655004303612.png" class="img_ev3q"><br>
<!-- -->上图发完5之后不发了，是因为必须要等2交付。</p><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>⚠ SR困境</div><div class="admonitionContent_S0QG"><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h35az8vzrkj30je0hddkq.jpg" alt="image.png" class="img_ev3q"><br>
<!-- -->因为接收方不能“看见发送方”采取的动作。接收方所能观察到的是它从信道中收到的以及它向信道中发出的报文序列。就其关注而言，上图的情况时等同的。显然，窗口长度比序列号空间小1时协议无法工作。序列号空间大小与窗口尺寸要满足：<br>
<em>Ns+Nr&lt;=2^k，Ns表示发送方的窗口大小，Nr表示接收方的窗口大小，k表示序列号位数</em>。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="比较gbn和sr">比较GBN和SR<a class="hash-link" href="#比较gbn和sr" title="标题的直接链接">​</a></h3><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/img/006SHRs9gy1h35axmadpuj30rj0acjv1.jpg" alt="image.png" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>标签：</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/计网">计网</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/docs/tags/计算机基础知识">计算机基础知识</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/inannan423/inannan423.github.io/tree/main/docs/学习笔记/03.计算机网络/07.运输层-可靠数据传输.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/学习笔记/计算机网络/运输层"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">运输层</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/学习笔记/计算机网络/运输层-TCP连接建立过程（三次握手四次挥手）"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">运输层-TCP连接建立过程</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rdt协议简介" class="table-of-contents__link toc-highlight">rdt协议简介</a></li><li><a href="#rdt10" class="table-of-contents__link toc-highlight">rdt1.0</a></li><li><a href="#rdt20" class="table-of-contents__link toc-highlight">rdt2.0</a></li><li><a href="#rdt21" class="table-of-contents__link toc-highlight">rdt2.1</a></li><li><a href="#rdt22" class="table-of-contents__link toc-highlight">rdt2.2</a></li><li><a href="#rdt30" class="table-of-contents__link toc-highlight">rdt3.0</a></li><li><a href="#流水线和滑动窗口机制" class="table-of-contents__link toc-highlight">流水线和滑动窗口机制</a><ul><li><a href="#滑动窗口协议sliding-window-protocol" class="table-of-contents__link toc-highlight">滑动窗口协议（Sliding-Window Protocol）</a></li><li><a href="#gbn协议回退重传协议go-back-n-protocol" class="table-of-contents__link toc-highlight">GBN协议（回退重传协议，Go-Back-N Protocol）</a></li><li><a href="#sr协议选择重传协议selective-repeat" class="table-of-contents__link toc-highlight">SR协议(选择重传协议，Selective Repeat)</a></li><li><a href="#比较gbn和sr" class="table-of-contents__link toc-highlight">比较GBN和SR</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><img style="position:relative;height:60px;left:-10px;top:-15px" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/fter.png">
                <br>Copyright © 2022 
                <br>
                <p style="opacity:0.6;font-family:ubuntu;font-size:0.5rem;font-weight:500">Made with ❤ by Chengzihan. 
                <br> Powered by Docusaurus.  <br>
                MIT LICENSE</p>
               </li></ul></div><div class="col footer__col"><div class="footer__title">Website</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/front">Front-end</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/study">Study</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tech Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vue.js<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.w3school.com.cn/python/index.asp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://zq99299.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Java<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://csspano.netlify.app" target="_blank" rel="noopener noreferrer" class="footer__link-item">csspano<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/inannan423/orange-nan-mini_program" target="_blank" rel="noopener noreferrer" class="footer__link-item">nanMiniProgram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/inannan423/inannan423.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">源代码<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bljx2022project.github.io/bljx_blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">北林计协<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://swwtech.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">四外维科技<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.netlify.com/" target="_blank"><img style="height:50px" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/netlify.png"><a>
                
                </a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.10231cf0.js"></script>
<script src="/assets/js/main.3a3576d8.js"></script>
</body>
</html>