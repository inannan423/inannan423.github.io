<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">2 posts tagged with &quot;GitHub Actions&quot; | Jetzihan</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jetzihan.netlify.app/blog/tags/git-hub-actions"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="msvalidate.01" content="7BFDC4075777E569E05945A5D040DA05"><meta data-rh="true" property="og:title" content="2 posts tagged with &quot;GitHub Actions&quot; | Jetzihan"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jetzihan.netlify.app/blog/tags/git-hub-actions"><link data-rh="true" rel="alternate" href="https://jetzihan.netlify.app/blog/tags/git-hub-actions" hreflang="en"><link data-rh="true" rel="alternate" href="https://jetzihan.netlify.app/blog/tags/git-hub-actions" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Jetzihan RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jetzihan Atom Feed"><link rel="stylesheet" href="/assets/css/styles.6ef01162.css">
<link rel="preload" href="/assets/js/runtime~main.8f8ac0dd.js" as="script">
<link rel="preload" href="/assets/js/main.a0ce6814.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Jetzihan" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Jetzihan" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Jetzihan</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Notes</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/front/">FrontEnd</a></li><li><a class="dropdown__link" href="/docs/study/">Study</a></li><li><a class="dropdown__link" href="/docs/back/">BackEnd</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Projects</a><ul class="dropdown__menu"><li><a href="https://daymd.netlify.app/zh" target="_blank" rel="noopener noreferrer" class="dropdown__link">Daymd</a></li><li><a class="dropdown__link" href="/projects">SVG-Board</a></li><li><a class="dropdown__link" href="/projects_csspano">cssPano</a></li><li><a class="dropdown__link" href="/stars">Nebula</a></li></ul></div><a class="navbar__item navbar__link" href="/website">Links</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div><a class="navbar__item navbar__link SandBoxButton" href="/CodingOnline">Sandpack</a><a href="https://github.com/inannan423" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Github repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Blogs</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/videoprocess">数字视频处理基本方法</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/chatGPT">chatGPT 接入微信</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/UnityCsharp">Unity 中的脚本</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/27/flask-back">Flask（PythonWeb）+MongoDB 实现简单Web后端</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2022/10/18/threejs">three.js 基础</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/jsdesigncodefun">即时设计和 codefun 使用</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/rpeace">使用 GitHub Actions 自动报平安</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/rnbug">React-Native 编译 Android 应用报错</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/wxpush">自动推送微信消息和课表</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/qiangzhi">爬取强智教务系统获取课表信息</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/gitrules">git commit 规范</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/daily">浅尝 DaisyUI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/webfront">前端发展概况介绍</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/codingbox">在线编码器</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/baiduoldpic">使用百度API实现老照片上色</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/Picbed">记一次图床迁移</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/easyx">EasyX图形界面构建</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/first-blog-post">认识Vue框架</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>2 posts tagged with &quot;GitHub Actions&quot;</h1><a href="/blog/tags">View All Tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/rpeace">使用 GitHub Actions 自动报平安</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-24T00:00:00.000Z" itemprop="datePublished">September 24, 2022</time> · <!-- -->10 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/inannan423" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220710133634.png" alt="Chengzihan"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/inannan423" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chengzihan</span></a></div><small class="avatar__subtitle" itemprop="description">Orange Chengzihan</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><blockquote><p>调用报平安接口并使用 GitHub Actions 自动完成北林每日报平安。本脚本
最大的特点是<strong>不需要你有一台一直开着的主机或者服务器</strong>，让 GitHub 完成这件事即可。</p></blockquote><p>主逻辑来自  <a href="https://github.com/Memorywzd?tab=repositories" target="_blank" rel="noopener noreferrer">@Memory</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="食用指南">食用指南<a class="hash-link" href="#食用指南" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fork-仓库">Fork 仓库<a class="hash-link" href="#fork-仓库" title="Direct link to heading">​</a></h3><p>仓库地址<a href="https://github.com/inannan423/reportPeace" target="_blank" rel="noopener noreferrer">https://github.com/inannan423/reportPeace</a>  </p><p>进入本仓库，点击右上角的 Fork 按钮，将本仓库 Fork 到自己的账号下。
顺便点击 <strong>star</strong>按钮收藏（为我点个赞）。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663990541568.png" alt="1" class="img_ev3q"></p><p>注意，此时这个仓库就是你的了，你在你的仓库密匙中填写的任何内容我均无法获取，请放心使用。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加个人信息">添加个人信息<a class="hash-link" href="#添加个人信息" title="Direct link to heading">​</a></h3><p>在报平安代码中，有许多涉及隐私的东西。比如学号、密码、用户ID等。我们不希望这些东西在源代码被公开，所以我们需要把它们添加到 GitHub Secrets 中。</p><p>下面举一个例子：  </p><p>在上面我们需要把<strong>学号</strong>存储为密匙，在代码中，它的变量名为 <code>STUDENT_ID</code> 。 打开你 Fork 后你的仓库。点击 <code>Settings</code>，然后点击 <code>Secrets</code>，点击 <code>New repository secret</code>，在 <code>Name</code> 中输入 <code>STUDENT_ID</code>，在 <code>Value</code> 中输入你的学号，点击 <code>Add secret</code>。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760551583.png" alt="2" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760586583.png" alt="3" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760637278.png" alt="4" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760673706.png" alt="5" class="img_ev3q"></p><p>然后点击添加。  </p><p>按照上述步骤，你还需要添加下面内容，这些内容打开你平时报平安的界面，获取相同的即可：  </p><div class="language-md codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-md codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">STUDENT_ID # 学号，示例：201002401</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PASSWORD # 密码，示例：abc123123123，也就是你的校园网密码</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NAME # 姓名，示例：张三</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SCHOOL # 学院，示例：信息学院</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MAJOR # 专业，示例：计算机科学与技术</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TYPE # 类型，示例：本科生 | 研究生</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PHONE # 手机号，示例：12345678901</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MASTER # 审核人，示例：李四</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">BUILDING # 宿舍楼栋，示例：11号楼</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ROOM # 宿舍号，示例：901</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>以上添加完成后如图所示：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220924114238.png" alt="2" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改定时可选">修改定时【可选】<a class="hash-link" href="#修改定时可选" title="Direct link to heading">​</a></h3><p>在 <code>yml</code> 脚本中，我已经设置了每天 0：11 执行，为保证准确性，还添加了二次执行时间为早上 8：10.
不选择整点执行而选择在11分执行是为了避开高峰期。
你可以对其修改。在 <code>.github/workflows</code> 文件夹中，打开 <code>main.yml</code> 文件，修改 <code>cron</code> 的值即可。  </p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> autoReportPeace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">repository_dispatch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token key atrule">types</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">morning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">schedule</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">-</span><span class="token plain"> </span><span class="token key atrule">cron</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;11 16,0 * * *&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token comment" style="color:rgb(98, 114, 164)"># UTC 时间 16：11和 0：11对北京时间 0：11和 8：11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token key atrule">workflow_dispatch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#......</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>GitHub 采用世界标准时间，也就是 UTC 时间。北京时间是 UTC+8，因此北京时间比 UTC 时间早8小时。所以 UTC 0：00 对应的 北京 时间是 8：00。<br>
<!-- -->也就是说，我们想要的时间减去8小时才是 UTC 时间。  </p><p>corn的语法如下：  </p><div class="language-commandline codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-commandline codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">┌───────────── minute (0 - 59)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ ┌───────────── hour (0 - 23)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ ┌───────────── day of the month (1 - 31)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ ┌───────────── month (1 - 12 or JAN-DEC)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ │ ┌───────────── day of the week (0 - 6 or SUN-SAT)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ │ │                                   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ │ │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">│ │ │ │ │</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">* * * * *</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>例如，我们希望早上九点半执行，那么我们需要设置为 1：30：  </p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">corn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;30 1 * * *&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者我们希望每天8：00和20：00执行：  </p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">corn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0 0,12 * * *&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者我们只希望每周三周五执行：  </p><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token key atrule">corn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;30 1 * * 3,5&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="手动测试">手动测试<a class="hash-link" href="#手动测试" title="Direct link to heading">​</a></h3><p>除了定时测试外，我们还支持手动进行测试。你只需要打开 GitHub Action 界面。选中左侧的 <code>autoReportPeace</code>，点击右侧的下拉栏中的 <code>Run workflow</code>，即可手动执行。</p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663991441170.png" alt="2" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663991525894.png" alt="3" class="img_ev3q"></p><p>接着，会有黄色的运行进程开始，直到进程变成蓝色的勾，表示运行成功。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663991606503.png" alt="3" class="img_ev3q"></p><p>延迟一到两分钟，你的微信会收到学校企业微信的报平安通知。表示部署成功，如果
不如预期，请检查上述步骤。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="腾讯云加强定时选做">腾讯云加强定时【选做】<a class="hash-link" href="#腾讯云加强定时选做" title="Direct link to heading">​</a></h3><blockquote><p>提高定时的准确性，可以不做。</p></blockquote><p>但是有一个缺陷，就是 GitHub Action 的定时是不准确的，有时候会延迟十分钟甚至一两个小时。
不过我们通过两个时间点的定时，可以很大程度保证准确性。</p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921220758.png" alt="2" class="img_ev3q"></p><blockquote><p>Note: The event can be delayed during periods of high loads of GitHub Actions workflow runs. High load times include the start of every hour. To decrease the chance of delay, schedule your workflow to run at a different time of the hour.schedule</p></blockquote><p>即  </p><blockquote><p>注意：在 GitHub Actions 工作流高负载运行期间，事件可能会延迟。高负载时间包括每小时的开始时等。为了减少延迟的可能性，请安排工作流在每小时的不同时间运行。</p></blockquote><p>实测使用 GitHub Pages 的定时服务，延迟在 10 分钟到 1 小时不等，极端条件下定时<strong>不会执行</strong>。  </p><p>而 GitHub Actions 支持 <code>workflow_dispatch</code> 触发器（请参阅 GitHub Docs 上的触发工作流的事件，因此如果您手动触发工作流，它将立刻执行。这意味着您可以使用第三方 cron 调度服务，如 腾讯云、IFTTT、Google Cloud Scheduler 等，向 GithubAPI 发出请求以触发工作流。</p><p>那么这里将讲授一种使用腾讯云云函数定时触发的方法，增强其可靠性。<strong>如果你认为
GitHub定时两个时间点已经足够可靠，可以不再进行此操作</strong>。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="获取-github-token">获取 GitHub Token<a class="hash-link" href="#获取-github-token" title="Direct link to heading">​</a></h4><p>想要从远端操作 GitHub，我们需要一个 GitHub Token。  </p><p>在你的 Github 主页，选择 <code>setting</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729256326.png" alt="1" class="img_ev3q"><br>
<!-- -->选择<strong>左下角的</strong>的 <strong>Developer settings</strong> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220725140853.png" alt="2" class="img_ev3q"><br>
<!-- -->然后选择 <code>Personal access tokens</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729485327.png" alt="3" class="img_ev3q"><br>
<!-- -->填写相关信息，选择 <strong>无限期</strong> ， 勾选 <strong>repo</strong> 和 <strong>workflow</strong> 。点击创建。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729568291.png" alt="4" class="img_ev3q"><br>
<!-- -->然后生成完成，之后它会生成一串密码：<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729659070.png" alt="5" class="img_ev3q"><br>
<!-- -->在你的 Github 主页，选择 <code>setting</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729256326.png" alt="1" class="img_ev3q"><br>
<!-- -->选择<strong>左下角的</strong>的 <strong>Developer settings</strong> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220725140853.png" alt="2" class="img_ev3q"><br>
<!-- -->然后选择 <code>Personal access tokens</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729485327.png" alt="3" class="img_ev3q"><br>
<!-- -->填写相关信息，选择 <strong>无限期</strong> ， 勾选 <strong>repo</strong> 和 <strong>workflow</strong> 。点击创建。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729568291.png" alt="4" class="img_ev3q"><br>
<!-- -->然后生成完成，之后它会生成一串密码：<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729659070.png" alt="5" class="img_ev3q">  </p><p><strong>注意</strong>：<br>
<!-- -->请记住这一串密码，你将不再能看到它。  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="创建云函数">创建云函数<a class="hash-link" href="#创建云函数" title="Direct link to heading">​</a></h4><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建腾讯云函数">创建腾讯云函数<a class="hash-link" href="#创建腾讯云函数" title="Direct link to heading">​</a></h3><p>进入 <a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer">腾讯云</a> 并点击注册。可以使用微信登录。点击右上角进入控制台，搜索 <code>云函数</code>。</p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663769827102.png" alt="2" class="img_ev3q"></p><p>点击新建云函数：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663770076533.png" alt="3" class="img_ev3q"></p><p>不选择模板，从头开始。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663770148646.png" alt="3" class="img_ev3q"></p><p>填写相关参数，选择环境 <code>python</code> ：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921222420.png" alt="3" class="img_ev3q"></p><p>提高超时时间。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921224654.png" alt="3" class="img_ev3q"></p><p>清空原有的代码，填入新的代码：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921222719.png" alt="2" class="img_ev3q"></p><p>代码结构如下，你只需要修改 <code>TOKEN</code> （上面一步获取的） 这几参数以及 <code>https://api.github.com/repos/你的用户名/reportPeace/dispatches</code> 中的 GitHub 用户名即可。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 腾讯云执行脚本，如不需要可忽略</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> requests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    headers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Accept&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;application/vnd.github+json&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Authorization&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;token 你的TOKEN&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">#     注：&#x27;token&#x27; 前缀必不可少 </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;event_type&quot;: &quot;autoReportPeace&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    response </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&#x27;https://api.github.com/repos/你的用户名/reportPeace/dispatches&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                             headers</span><span class="token operator">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token operator">=</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 云函数入口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>点击启用日志。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921224146.png" alt="2" class="img_ev3q"></p><p>然后点击完成。进入详细界面的代码界面，点击测试。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663771386619.png" alt="3" class="img_ev3q"></p><p>查看下面的日志：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663771746606.png" alt="3" class="img_ev3q"></p><p>如果出现 <code>204</code>，则表示成功。其他状态码均为失败。</p><p>然后到 GitHub 仓库查看 Actions，可以看到已经成功触发了工作流。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663771858447.png" alt="2" class="img_ev3q"></p><p>勾变为蓝色，表示成功。  </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="设置云函数定时触发">设置云函数定时触发<a class="hash-link" href="#设置云函数定时触发" title="Direct link to heading">​</a></h4><p>在侧边中创建定时：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663772079546.png" alt="2" class="img_ev3q"></p><p>点击创建触发器。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921225616.png" alt="3" class="img_ev3q"></p><p>其中填写 Cron 表达式。  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token number">0</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">8</span><span class="token plain"> * * * *   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 每天 8 点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain"> * * * *  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 每天 18 点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">7</span><span class="token plain"> * * </span><span class="token number">1</span><span class="token plain">-5 * </span><span class="token comment" style="color:rgb(98, 114, 164)"># 周一到周五 7 点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">30</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> * * * *  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 每天 6 点半</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>点击提交后，会在每天指定时间触发执行。注意，腾讯云与 GitHub 不同，腾讯云
使用的是北京时间，这意味着你并不需要考虑时区问题。</p><p>一个函数而已，并不会消耗多少资源，所以不用担心。</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/python">Python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/git-hub-actions">GitHub Actions</a></li></ul></div></footer></article><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/blog/wxpush">自动推送微信消息和课表</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2022-09-21T00:00:00.000Z" itemprop="datePublished">September 21, 2022</time> · <!-- -->20 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/inannan423" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220710133634.png" alt="Chengzihan"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/inannan423" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Chengzihan</span></a></div><small class="avatar__subtitle" itemprop="description">Orange Chengzihan</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="前言">前言<a class="hash-link" href="#前言" title="Direct link to heading">​</a></h2><p>在上一篇博客中，我介绍了写好的爬取课程表的代码，但是这个代码只能在本地运行，但是现在我希望可以使用微信来进行课程提醒。但是配置服务器无疑是比较麻烦的，经过分析我发现定时任务和代码执行都可以使用 GitHub Action 执行。所以我就想到了使用 GitHub Actions 及 GitHub API 来实现这个功能。<strong>本篇文章将介绍如何使用我的代码实现课程与每日天气自动推送</strong>。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="涉及的工具和技术">涉及的工具和技术<a class="hash-link" href="#涉及的工具和技术" title="Direct link to heading">​</a></h2><ul><li>Python</li><li>GitHub Actions</li><li>微信公众平台开发</li><li>腾讯云函数 SCF</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-actions-介绍">GitHub Actions 介绍<a class="hash-link" href="#github-actions-介绍" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921130548.png" alt="1" class="img_ev3q"></p><p>GitHub Action 是 GitHub 提供的一项功能，可以在 GitHub 上运行自定义的脚本，可以用来自动化构建、测试、打包、发布或部署任何项目。GitHub Action 是 GitHub 为开发者提供的一项功能，可以在 GitHub 上运行自定义的脚本，可以用来自动化构建、测试、打包、发布或部署任何项目。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="微信公众测试号">微信公众测试号<a class="hash-link" href="#微信公众测试号" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="注册">注册<a class="hash-link" href="#注册" title="Direct link to heading">​</a></h3><p>我们要使用微信公众号来帮助我们传递消息。但是一般个人能注册的<strong>订阅号</strong>是不能满足我们的要求的，每天只能推送一条图文消息。但是微信为我们提供了<strong>测试号</strong>，测试号可以满足我们的需求，毕竟课表推送我们仅仅个人使用，不需要太多的人数。所以一个测试号就够了。  </p><p>首先打开<a href="https://mp.weixin.qq.com/debug/cgi-bin/sandboxinfo?action=showinfo&amp;t=sandbox/index" target="_blank" rel="noopener noreferrer">微信公众平台测试号注册</a>。扫码登录后，点击<strong>立即开通</strong>，然后填写信息，就可以注册完成了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="扫码关注">扫码关注<a class="hash-link" href="#扫码关注" title="Direct link to heading">​</a></h3><p>在界面上找到二维码，让需要使用的用户扫码关注。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663747160731.png" alt="2" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="获取高德天气-api">获取高德天气 API<a class="hash-link" href="#获取高德天气-api" title="Direct link to heading">​</a></h2><blockquote><p>不需要这个的可以跳过这一步。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="注册-1">注册<a class="hash-link" href="#注册-1" title="Direct link to heading">​</a></h3><p>打开<a href="https://lbs.amap.com/" target="_blank" rel="noopener noreferrer">高德开放平台</a>，点击<strong>右上角注册</strong>，然后填写信息，就可以注册完成了。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建应用">创建应用<a class="hash-link" href="#创建应用" title="Direct link to heading">​</a></h3><p>注册成功后，打开控制台，在左侧选择<strong>应用管理</strong>，点击<strong>我的应用</strong>，然后在右上角选择<strong>创建新任务</strong>。应用名称和应用类型可以随意填写，然后点击<strong>创建</strong>。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663747692810.png" alt="1" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加-key">添加 Key<a class="hash-link" href="#添加-key" title="Direct link to heading">​</a></h3><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921190246.png" alt="2" class="img_ev3q"></p><p>接着，填写信息，选择 Web 服务。然后点击<strong>提交</strong>。名称可以随便取。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663758223317.png" alt="2" class="img_ev3q"></p><p>记住这个生成的 Key ，之后会用到。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663758289526.png" alt="3" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-github-上-fork-本项目">在 GitHub 上 Fork 本项目<a class="hash-link" href="#在-github-上-fork-本项目" title="Direct link to heading">​</a></h2><p>打开本项目 <a href="https://github.com/inannan423/wx_weather_class_push" target="_blank" rel="noopener noreferrer">仓库地址</a>，点击右上角 <strong>Fork</strong> 并顺便点击 <strong>Star</strong> 纳入你的收藏，就可以将本项目全部代码复制到你的仓库中了。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663744534290.png" alt="2" class="img_ev3q"></p><p>然后，克隆源代码到你的本地。  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="在线编辑项目源代码">在线编辑项目源代码<a class="hash-link" href="#在线编辑项目源代码" title="Direct link to heading">​</a></h2><p>但是，实际上我们并不需要做过多修改，只需要一点点的参数修改就可以完成项目的构建了。那么，克隆在本地也就不再必要了，这里将为希望省事的人或者不会使用 Git 的人提供一个方法，直接在 GitHub 上修改代码。  </p><p>GitHub 提供了一种能力叫做 <strong>GitHub Codespaces</strong>，可以在<strong>浏览器</strong>中直接修改代码，不需要下载任何东西。我们只需要把你刚刚克隆的仓库 <code>&lt;你的昵称&gt;/wx_weather_class_push</code> 中浏览器上方导航栏的链接中 <code>github.com</code> 改为 <code>github.dev</code> ，就可以启动在线 VScode ，便于你在浏览器中修改代码了。  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://github.com/</span><span class="token operator">&lt;</span><span class="token plain">你的GitHub昵称</span><span class="token operator">&gt;</span><span class="token plain">/wx_weather_class_push</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>修改后：  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">https://github.dev/</span><span class="token operator">&lt;</span><span class="token plain">你的GitHub昵称</span><span class="token operator">&gt;</span><span class="token plain">/wx_weather_class_push</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>启动过程，请稍等片刻：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921152948.png" alt="2" class="img_ev3q"></p><p>启动成功，出现编辑器界面：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921153019.png" alt="3" class="img_ev3q"></p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>右下角可能提示让你安装 Python 依赖，安装即可。</p></div></div><p>字太小了，我们可以把字体放大一点。点击左下角的设置图标。将文字大小设置为 20.可以按照自己的喜好设置。</p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663745545141.png" alt="1" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="修改配置">修改配置<a class="hash-link" href="#修改配置" title="Direct link to heading">​</a></h2><p>本项目提供了两种功能，可以每天早上道早安每天晚上道晚安同时在每节课开始前可以推送课程信息。这两个内容互相独立，可以只执行一个，也可以两者都执行。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改早安推送代码">修改早安推送代码<a class="hash-link" href="#修改早安推送代码" title="Direct link to heading">​</a></h3><p>早安推送代码对应文件 <code>morning.py</code>。在左侧文件栏中找到 <code>morning.py</code>，点击打开。</p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921154911.png" alt="2" class="img_ev3q"></p><p>在这个功能中，你只需要修改 <code>user_id_list</code> 即用户列表。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">user_id_list </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;user_id&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user_id_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户 ID，不需要在这里修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Orange&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户昵称，可以修改，随便写</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;date&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2021-04-02&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 纪念日，可以修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;birthday&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;05-28&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 生日，可以修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;city&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;110108&quot;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 城市代码，可以修改，在高德 API 中查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在 <a href="https://lbs.amap.com/api/webservice/guide/api/weatherinfo" target="_blank" rel="noopener noreferrer">这里</a> 可以查询你的城市的天气接口代码。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663758970981.png" alt="2" class="img_ev3q"></p><p>同时，你可以添加多个人，只需要在 <code>user_id_list</code> 中再添加一个字典即可。但是请注意，你需要添加一个新的 <code>user_id</code> 环境变量。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">user_id_list </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;user_id&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user_id_1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户 ID，不需要在这里修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Orange&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户昵称，可以修改，随便写</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;date&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2021-04-02&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 纪念日，可以修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;birthday&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;05-28&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 生日，可以修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;city&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;110108&quot;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 城市代码，可以修改，在高德 API 中查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;user_id&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> user_id_2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户 ID，不需要在这里修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Orange&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户昵称，可以修改，随便写</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;date&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;2021-04-02&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 纪念日，可以修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;birthday&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;05-28&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 生日，可以修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;city&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;110108&quot;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 城市代码，可以修改，在高德 API 中查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改晚安推送代码">修改晚安推送代码<a class="hash-link" href="#修改晚安推送代码" title="Direct link to heading">​</a></h3><blockquote><p>晚安代码对应 <code>eve.py</code> 在基础使用中，不需要修改。  </p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改课表信息代码">修改课表信息代码<a class="hash-link" href="#修改课表信息代码" title="Direct link to heading">​</a></h3><p>课表代码对应文件 <code>classPush.py</code>。在左侧文件栏中找到 <code>classPush.py</code>，点击打开。</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改用户列表">修改用户列表<a class="hash-link" href="#修改用户列表" title="Direct link to heading">​</a></h4><p>首先，同上，你可以修改 <code>user_id_list</code> 即用户列表。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921192308.png" alt="2" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改学期信息">修改学期信息<a class="hash-link" href="#修改学期信息" title="Direct link to heading">​</a></h4><p>修改学年号和学期开始时间。除了下面高亮的两行( <code>semester</code> 和 <code>firstDay</code> )外，其他不要修改。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin" style="color:rgb(189, 147, 249)">id</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;STUDENT_ID&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 学号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pwd </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;PASSWORD&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 密码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 微信公众号 ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_id </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;APP_ID&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 微信公众号 app_secret</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">app_secret </span><span class="token operator">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">environ</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;APP_SECRET&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain">semester </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2022-2023-1&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 学期</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain">firstDay </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;2022-08-29&#x27;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 学期开始日期</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># ...省略</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改教务系统链接">修改教务系统链接<a class="hash-link" href="#修改教务系统链接" title="Direct link to heading">​</a></h4><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>本套代码适用于强智教务系统，如果你的教务系统不是强智，请自行寻找 API 进行适配。</p></div></div><p>然后，你可以修改两个链接，将前面的前缀地址改为你学校的教务系统地址。即把 <code>&lt;http://newjwxt.bjfu.edu.cn/&gt;</code> 改为你学校的教务系统地址。后面的链接不要改动。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># ...省略其他代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Crawl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain">    loginLink </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http://newjwxt.bjfu.edu.cn/app.do?method=authUser&amp;xh=&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">id</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&amp;pwd=&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> pwd</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    rep </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">loginLink</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    res </span><span class="token operator">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">rep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 使用账号密码换取网站 token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    token </span><span class="token operator">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;token&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain">    tableUrl </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;http://newjwxt.bjfu.edu.cn/app.do?method=getKbcxAzc&amp;xh=&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">id</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&amp;xnxqid=&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> semester </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;&amp;zc=&quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> week</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    header </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;token&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> token  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 传入 token ，鉴权</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    res </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token operator">=</span><span class="token plain">tableUrl</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> headers</span><span class="token operator">=</span><span class="token plain">header</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    schedule </span><span class="token operator">=</span><span class="token plain"> json</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">loads</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">res</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">text</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 读取课表 json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)"># ...省略其他代码</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="修改每节课开始时间">修改每节课开始时间<a class="hash-link" href="#修改每节课开始时间" title="Direct link to heading">​</a></h4><p>这一步就稍微有点复杂了，不过也很好理解，我们需要判断当前时间在课表的哪个时间段，来判断现在应该要上哪一节课。  </p><p>先获取现在的时间，由于我想要提前进行提醒，所以我把时间<strong>推迟</strong>20分钟，这样就可以提前20分钟提醒了。（就是说要去查询20分钟后的课程）  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 获取现在时间</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">now </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 获取现在时间的小时和分钟</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">hour </span><span class="token operator">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">hour</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">minute </span><span class="token operator">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">minute </span><span class="token operator">+</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)"># 查询20分钟后的课程</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">second </span><span class="token operator">=</span><span class="token plain"> now</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">second</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 分钟加20后，可能需要进行进位，如果分钟大于60，小时加1，分钟减60</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> minute </span><span class="token operator">&gt;=</span><span class="token plain"> </span><span class="token number">60</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hour </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    minute </span><span class="token operator">-=</span><span class="token plain"> </span><span class="token number">60</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接着，我们要把处理好的时间转换成字符串，方便后面的比较。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 如果小时小于10，前面加0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> hour</span><span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nowTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;0&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">hour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">minute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">second</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nowTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">hour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">minute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">second</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 如果进位后时间为 24：00：00 ，则改为 00：00：00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> hour</span><span class="token operator">==</span><span class="token number">24</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    nowTime </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;00&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">minute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;:&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(189, 147, 249)">str</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">second</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后，我们要判断现在时间在课表的哪个时间段，来判断现在应该要上哪一节课。我们<strong>把课表的几个关键点创建为变量</strong>。例如，我们学校的时间表如下：  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 8:00-9:35 第1-2节</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 9:50-12:15 第3-5节</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 13:30-15:05 第6-7节</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 15:20-16:55 第8-9节</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 18:30-20:55 第10-12节</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们只需要记录开始时间。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt1 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;08:00:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt2 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;09:50:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt3 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;13:30:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt4 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;15:20:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt5 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;18:30:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但是，Github采用UTC时间，北京时间比UTC时间早8小时。所以我们必须把上述时间减去8小时。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt1 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;00:00:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt2 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;01:50:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt3 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;05:30:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt4 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;07:20:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dt5 </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;10:30:00&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>将现在的时间（准确来说是二十分钟后的时间）存为变量。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">dtNow </span><span class="token operator">=</span><span class="token plain"> datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">datetime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">strptime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">nowTime</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;%H:%M:%S&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>然后计算整个时间段的秒数。例如 <code>8:00-9:35</code> 的秒数为 <code>95 * 60 = 5700</code>，依此类推。用<strong>现在的时间减去课程开始的时间</strong>，如果结果大于 0 且小于这个时间段的秒数，那么就是在这个时间段。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dtNow </span><span class="token operator">-</span><span class="token plain"> dt1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">seconds </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">5700</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">elif</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dtNow </span><span class="token operator">-</span><span class="token plain"> dt2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">seconds </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">8700</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">elif</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dtNow </span><span class="token operator">-</span><span class="token plain"> dt3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">seconds </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">5700</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">elif</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dtNow </span><span class="token operator">-</span><span class="token plain"> dt4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">seconds </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">5700</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">elif</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">dtNow </span><span class="token operator">-</span><span class="token plain"> dt5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">seconds </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">8700</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="添加-secrets">添加 Secrets<a class="hash-link" href="#添加-secrets" title="Direct link to heading">​</a></h2><p>在上面的代码中，有许多涉及隐私的东西。比如学号、密码、用户ID等。我们不希望这些东西在源代码被公开，所以我们需要把它们添加到 GitHub Secrets 中。</p><p>下面举一个例子：  </p><p>在上面我们需要把<strong>学号</strong>存储为密匙，在代码中，它的变量名为 <code>STUDENT_ID</code> 。 打开你 Fork 后你的仓库。点击 <code>Settings</code>，然后点击 <code>Secrets</code>，点击 <code>New repository secret</code>，在 <code>Name</code> 中输入 <code>STUDENT_ID</code>，在 <code>Value</code> 中输入你的学号，点击 <code>Add secret</code>。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760551583.png" alt="2" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760586583.png" alt="3" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760637278.png" alt="4" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760673706.png" alt="5" class="img_ev3q"></p><p>然后点击添加。  </p><p>按照上述步骤，你还需要添加下面内容：  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">APP_ID </span><span class="token comment" style="color:rgb(98, 114, 164)"># 测试公众号的ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">APP_SECRET  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 测试公众号的密匙</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">KEY </span><span class="token comment" style="color:rgb(98, 114, 164)"># 高德应用的密匙</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PASSWORD    </span><span class="token comment" style="color:rgb(98, 114, 164)"># 教务系统密码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STUDENT_ID  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 学号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEMPLATE_ID </span><span class="token comment" style="color:rgb(98, 114, 164)"># 早安模板ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEMPLATE_ID_CLASS </span><span class="token comment" style="color:rgb(98, 114, 164)"># 课表模板ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEMPLATE_ID_EVE </span><span class="token comment" style="color:rgb(98, 114, 164)"># 晚安模板ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TEMPLATE_ID_NOCLASS </span><span class="token comment" style="color:rgb(98, 114, 164)"># 无课模板ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER_ID_1   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户1 ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">USER_ID_2   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 用户2 ID ，还有多个用户可以继续添加</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="获取-app_id-和-app_secret">获取 APP_ID 和 APP_SECRET<a class="hash-link" href="#获取-app_id-和-app_secret" title="Direct link to heading">​</a></h3><p>在微信公众平台测试账号页面，前面的就是 <code>APP_ID</code>，后面的就是 <code>APP_SECRET</code>。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663760963365.png" alt="2" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="获取高德应用的密匙-key">获取高德应用的密匙 KEY<a class="hash-link" href="#获取高德应用的密匙-key" title="Direct link to heading">​</a></h3><p>就在上面的步骤中。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="获取模板-id">获取模板 ID<a class="hash-link" href="#获取模板-id" title="Direct link to heading">​</a></h3><p>在微信公众平台测试账号页面创建模板。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663761105036.png" alt="2" class="img_ev3q"></p><p>目前，你按需可以创建四个模板。如下添加：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921195245.png" alt="3" class="img_ev3q"></p><p>在这里我把全部模板提供给你，你也可以修改。  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># 上课模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">20</span><span class="token plain">分钟后即将上课： 课程名称： </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">kcmc.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> 上课节数： </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">sksj.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> 上课地点： </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">jsmc.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> 课程教师： </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">jsxm.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">words.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 无课模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">一会没有课嗷，休息一会或者自习吧！</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 早安模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">早上好！ 今天 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">cityname.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> ，天气 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">weather.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> ，温度 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">temperature.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">，风向 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">winddirection.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain">，今天是我们第 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">love_days.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> 天，距离生日还有 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">birthday_left.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> 天！ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">words.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 晚安模板</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">晚安！ 月亮坠入不见底的河，星星垂眸惊动了舸。晚安~~ </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">words.DATA</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>创建好模板后，在侧边栏复制模板 ID。填入 <code>TEMPLATE_ID</code>，<code>TEMPLATE_ID_CLASS</code>，<code>TEMPLATE_ID_EVE</code>，<code>TEMPLATE_ID_NOCLASS</code> 中。  </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="提交代码">提交代码<a class="hash-link" href="#提交代码" title="Direct link to heading">​</a></h2><p>代码编写完后，点击左侧分支按钮。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663773105270.png" alt="2" class="img_ev3q"></p><p>然后在上面随意输入信息。然后点击上面的对勾提交。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663773176228.png" alt="2" class="img_ev3q"></p><p>当仓库首页出现提交信息说明提交成功了。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663773229904.png" alt="2" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="腾讯云定时服务">腾讯云定时服务<a class="hash-link" href="#腾讯云定时服务" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="背景">背景<a class="hash-link" href="#背景" title="Direct link to heading">​</a></h3><p>实际上 GitHub Pages 本身就能实现定时服务。让我们看看官方文档是怎么说的：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921220758.png" alt="2" class="img_ev3q"></p><blockquote><p>Note: The event can be delayed during periods of high loads of GitHub Actions workflow runs. High load times include the start of every hour. To decrease the chance of delay, schedule your workflow to run at a different time of the hour.schedule</p></blockquote><p>即  </p><blockquote><p>注意：在 GitHub Actions 工作流高负载运行期间，事件可能会延迟。高负载时间包括每小时的开始时等。为了减少延迟的可能性，请安排工作流在每小时的不同时间运行。</p></blockquote><p>实测使用 GitHub Pages 的定时服务，延迟在 10 分钟到 1 小时不等，极端条件下定时<strong>不会执行</strong>。我们果断抛弃这个方式。  </p><p>而 GitHub Actions 支持 <code>workflow_dispatch</code> 触发器（请参阅 GitHub Docs 上的触发工作流的事件，因此如果您手动触发工作流，它将立刻执行。这意味着您可以使用第三方 cron 调度服务，如 腾讯云、IFTTT、Google Cloud Scheduler 等，向 GithubAPI 发出请求以触发工作流。  </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="获取-github-token">获取 GitHub Token<a class="hash-link" href="#获取-github-token" title="Direct link to heading">​</a></h3><p>在你的 Github 主页，选择 <code>setting</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729256326.png" alt="1" class="img_ev3q"><br>
<!-- -->选择<strong>左下角的</strong>的 <strong>Developer settings</strong> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220725140853.png" alt="2" class="img_ev3q"><br>
<!-- -->然后选择 <code>Personal access tokens</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729485327.png" alt="3" class="img_ev3q"><br>
<!-- -->填写相关信息，选择 <strong>无限期</strong> ， 勾选 <strong>repo</strong> 和 <strong>workflow</strong> 。点击创建。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729568291.png" alt="4" class="img_ev3q"><br>
<!-- -->然后生成完成，之后它会生成一串密码：<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729659070.png" alt="5" class="img_ev3q"><br>
<!-- -->在你的 Github 主页，选择 <code>setting</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729256326.png" alt="1" class="img_ev3q"><br>
<!-- -->选择<strong>左下角的</strong>的 <strong>Developer settings</strong> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220725140853.png" alt="2" class="img_ev3q"><br>
<!-- -->然后选择 <code>Personal access tokens</code> 。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729485327.png" alt="3" class="img_ev3q"><br>
<!-- -->填写相关信息，选择 <strong>无限期</strong> ， 勾选 <strong>repo</strong> 和 <strong>workflow</strong> 。点击创建。<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729568291.png" alt="4" class="img_ev3q"><br>
<!-- -->然后生成完成，之后它会生成一串密码：<br>
<img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1658729659070.png" alt="5" class="img_ev3q">  </p><div class="theme-admonition theme-admonition-danger alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>注意</div><div class="admonitionContent_S0QG"><p>请记住这一串密码，你将不再能看到它。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="创建腾讯云函数">创建腾讯云函数<a class="hash-link" href="#创建腾讯云函数" title="Direct link to heading">​</a></h3><p>进入 <a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer">腾讯云</a> 并点击注册。可以使用微信登录。点击右上角进入控制台，搜索 <code>云函数</code>。</p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663769827102.png" alt="2" class="img_ev3q"></p><p>你需要创建三个云函数，分别是：<code>morning</code>，<code>evening</code>，<code>class</code>。下面以 <code>morning</code> 为例。  </p><p>点击新建云函数：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663770076533.png" alt="3" class="img_ev3q"></p><p>不选择模板，从头开始。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663770148646.png" alt="3" class="img_ev3q"></p><p>填写相关参数，选择环境 <code>python</code> ：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921222420.png" alt="3" class="img_ev3q"></p><p>提高超时时间。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921224654.png" alt="3" class="img_ev3q"></p><p>清空原有的代码，填入新的代码：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921222719.png" alt="2" class="img_ev3q"></p><p>代码结构如下，你只需要修改 <code>TOKEN</code> （上面一步获取的） 这几参数以及 <code>https://api.github.com/repos/&lt;YOUR GITHUB NAME&gt;/wx_weather_class_push/dispatches</code> 中的 GitHub 用户名即可。  </p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> requests</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        headers </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Accept&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;application/vnd.github+json&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;Authorization&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;token &lt;TOKEN&gt;&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)"># 请把 &lt;TOKEN&gt; 替换为你的 GitHub Token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain">        data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;{&quot;event_type&quot;: &quot;morning&quot;}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F8F8F2"><span class="token plain">        response </span><span class="token operator">=</span><span class="token plain"> requests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">post</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f&#x27;https://api.github.com/repos/&lt;YOUR GITHUB NAME&gt;/wx_weather_class_push/dispatches&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> headers</span><span class="token operator">=</span><span class="token plain">headers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> data</span><span class="token operator">=</span><span class="token plain">data</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># 云函数入口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">main_handler</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">event</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>点击启用日志。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921224146.png" alt="2" class="img_ev3q"></p><p>然后点击完成。进入详细界面的代码界面，点击测试。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663771386619.png" alt="3" class="img_ev3q"></p><p>查看下面的日志：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663771746606.png" alt="3" class="img_ev3q"></p><p>如果出现 <code>204</code>，则表示成功。其他状态码均为失败。</p><p>然后到 GitHub 仓库查看 Actions，可以看到已经成功触发了工作流。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663771858447.png" alt="2" class="img_ev3q"></p><p>勾变为蓝色，表示成功。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921225137.png" alt="3" class="img_ev3q"></p><p>这时手机收到了推送。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921225324.png" alt="2" class="img_ev3q"></p><p>然后，在侧边中创建定时：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/1663772079546.png" alt="2" class="img_ev3q"></p><p>点击创建触发器。  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921225616.png" alt="3" class="img_ev3q"></p><p>其中填写 Cron 表达式。  </p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token number">0</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">8</span><span class="token plain"> * * * *   </span><span class="token comment" style="color:rgb(98, 114, 164)"># 每天 8 点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">18</span><span class="token plain"> * * * *  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 每天 18 点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">7</span><span class="token plain"> * * </span><span class="token number">1</span><span class="token plain">-5 * </span><span class="token comment" style="color:rgb(98, 114, 164)"># 周一到周五 7 点</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token number">0</span><span class="token plain"> </span><span class="token number">30</span><span class="token plain"> </span><span class="token number">6</span><span class="token plain"> * * * *  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 每天 6 点半</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>点击提交后，会在每天指定时间触发执行。  </p><p>你还需要完成两个云函数，分别是 <code>evening</code>，<code>class</code>。可以参考上述步骤。其中课表推送需要多个触发器，参考如下：  </p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921230142.png" alt="3" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921230220.png" alt="3" class="img_ev3q"></p><p><img loading="lazy" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/20220921230236.png" alt="3" class="img_ev3q"></p><p>这需要根据你的课程表自行修改。</p><p>在源代码仓库的 <code>run.py</code> 中，由上面三个函数的源码。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="支持">支持<a class="hash-link" href="#支持" title="Direct link to heading">​</a></h2><p>如果你觉得这个项目对你有帮助，欢迎给我一个 Star。  </p><p>仓库地址：<a href="https://github.com/inannan423/wx_weather_class_push" target="_blank" rel="noopener noreferrer">wx_weather_class_push</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/python">python</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/爬虫">爬虫</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/git-hub-actions">GitHub Actions</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/workflows">workflows</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/腾讯云">腾讯云</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"></nav></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><img style="position:relative;height:60px;left:-10px;top:-15px" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/fter.png">
                <br>Copyright © 2023 
                <br>
                <p style="opacity:0.6;font-family:ubuntu;font-size:0.5rem;font-weight:500">Made with ❤ by Chengzihan. 
                <br> Powered by Docusaurus.  <br>
                MIT LICENSE</p>
               </li></ul></div><div class="col footer__col"><div class="footer__title">Website</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/front">Front-end</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/back">Back-end</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/study">Study</a></li><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/CodingOnline">Sandpack</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tech Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://react.docschina.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Vue.js<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.w3school.com.cn/python/index.asp" target="_blank" rel="noopener noreferrer" class="footer__link-item">Python<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://zq99299.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Java<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://docusaurus.io/zh-CN/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/buildwith.png"><a>
                
                </a></li></ul></div><div class="col footer__col"><div class="footer__title">Projects</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://daymd.netlify.app/zh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Daymd<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://csspano.netlify.app" target="_blank" rel="noopener noreferrer" class="footer__link-item">csspano<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/inannan423/orange-nan-mini_program" target="_blank" rel="noopener noreferrer" class="footer__link-item">nanMiniProgram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://inannan423.github.io/Svg_Board/#/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SVG Board<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/inannan423/inannan423.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">源代码<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://bljx2022project.github.io/bljx_blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">北林计协<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://swwtech.github.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">四外维科技<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.netlify.com/" target="_blank"><img style="height:50px;margin-top:0.5rem" src="https://jetzihan-img.oss-cn-beijing.aliyuncs.com/blog/netlify.png"><a>
                
                </a></li></ul></div></div></div></footer></div>
<script src="/assets/js/runtime~main.8f8ac0dd.js"></script>
<script src="/assets/js/main.a0ce6814.js"></script>
</body>
</html>